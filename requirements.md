# 天気通知Slackbot 要件定義書 v1.1

## 変更履歴
- v1.0: 初版作成
- v1.1: 1時間ごとの天気情報表示機能を追加（2024-01-XX）

## 1. システム概要
Google Apps Script(GAS)を利用して、指定された地域の天気情報を自動的にSlackチャンネルに通知するシステム

## 2. 基本機能
### 2.1 天気情報取得機能
- Open-meteo APIを使用した天気データの取得
- 取得する情報：
  - 1時間ごとの天気状態（晴れ、雨など）
  - 1時間ごとの気温
  - 1時間ごとの降水確率
  - 日ごとの最高気温
  - 日ごとの最低気温

### 2.2 位置情報管理機能
- HeartRails Geo APIを使用
- 郵便番号による地点指定
- 郵便番号から緯度経度への自動変換

### 2.3 Slack通知機能
- 専用チャンネル（#天気通知）への投稿
- 日次の天気情報を定期通知
- カスタマイズ可能な通知時間設定

## 3. システム要件
### 3.1 開発環境
- Google Apps Script
- スクリプトプロパティによる設定管理

### 3.2 外部API連携
- Open-meteo API（天気情報取得）
  - 無料プラン利用
  - APIキー不要
- HeartRails Geo API（位置情報取得）
  - 無料プラン利用
  - APIキー不要
- Slack Incoming Webhook
  - チャンネルへの投稿権限必要

## 4. カスタマイズ設定
### 4.1 必須設定項目
- Slack Webhook URL
- 郵便番号
- 通知時間（複数設定可能）

### 4.2 通知内容
- 日付
- 1時間ごとの詳細情報：
  - 時刻
  - 天気状態
  - 気温
  - 降水確率
- 1日の概要：
  - 最高/最低気温
  - 総合的な天気状態

## 5. 非機能要件
### 5.1 性能要件
- 1日複数回の定期実行に対応
- API制限内での安定動作

### 5.2 セキュリティ要件
- Webhook URLの安全な管理
- スクリプトプロパティによる設定情報の保護

### 5.3 保守性
- モジュール化された設計
- エラーログの記録
- 設定変更の容易性

## 6. 制限事項
- Open-meteo APIの利用制限に準拠
- HeartRails Geo APIの1日10,000リクエスト制限
- GASの実行時間制限（6分/実行）

## 7. 今後の拡張性
- 複数地点の天気情報取得
- 通知形式のカスタマイズ
- 週間天気予報への対応
- 気圧や湿度などの追加気象情報の表示 